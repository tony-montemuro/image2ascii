<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Image2Ascii</title>
    <link rel="stylesheet" href="../static/styles.css"/>
    <script src="../static/script.js"></script>
  </head>
  <body class="w-full pt-12 flex flex-col min-h-screen bg-white dark:bg-neutral-900 dark:text-neutral-100">
    <button id="display" type="button" class="fixed top-0 right-0 pr-4 pt-4" title="Dark mode">
      <svg id="display-light" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-moon">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
        <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"/>
      </svg>
      <svg id="display-dark" class="sr-only" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-sun">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
        <path d="M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0"/>
        <path d="M3 12h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7"/>
      </svg>
    </button>
    <div class="flex justify-center flex-col gap-2 items-center">
      <h1 class="text-center">Image2Ascii</h1>
      <form id="form" class="flex flex-col gap-2" method="post">
        <div class="flex flex-row gap-2">

          <!-- Image Upload -->
          <div class="flex justify-center">
            <label
              for="image"
              role="button"
              tabindex="0"
              class="w-96 h-52 bg-gray-200 hover:bg-gray-200/80 dark:bg-zinc-800/80 dark:hover:bg-zinc-800 border border-dashed border-gray-400 rounded-lg cursor-pointer btn p-1 rounded"
              id="upload"
            >

              <!-- Left Side -->
              <div class="h-full flex items-center">
                <div class="flex flex-row items-center">
                  <div id="img-placeholder" class="p-4">
                    <svg xmlns="http://www.w3.org/2000/svg" width="5rem" height="5rem" viewBox="0 0 24 24" fill="currentColor">
                      <path d="M0 0h24v24H0V0z" fill="none"/>
                      <path d="M18 20H4V6h9V4H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-9h-2v9zm-7.79-3.17l-1.96-2.36L5.5 18h11l-3.54-4.71zM20 4V1h-2v3h-3c.01.01 0 2 0 2h3v2.99c.01.01 2 0 2 0V6h3V4h-3z"/>
                    </svg>
                  </div>
                  <div id="thumbnail-wrapper" class="sr-only w-40 h-full p-2 flex items-center flex flex-col gap-1">
                    <img id="thumbnail" class="w-full h-40 object-contain grayscale-[75%]" src="" title="Your Image" />
                    <span id="thumbnail-name" class="w-full text-xs text-center text-ellipsis overflow-hidden whitespace-nowrap"></span>
                  </div>
                </div>

                <!-- Right Side -->
                <div class="w-full flex flex-col items-center justify-center">
                  <strong class="text-lg">Drag & Drop Image</strong>
                  <span>or</span>
                  <div class="w-28 h-12 bg-blue-500 hover:bg-blue-500/90 inline-flex items-center justify-center cursor-pointer rounded-full border-2 border-transparent">
                    <span class="text-white">Browse Files</span>
                  </div>
                </div>
              </div>
            </label>
            <input 
              type="file"
              id="image"
              name="image"
              accept="image/png, image/jpg, image/jpeg"
              class="sr-only"
              tabindex="-1"
            />
          </div>

          <!-- Options -->
          <div id="options" class="sr-only flex flex-col gap-2 items-center">
            <div class="flex flex-col gap-2 w-fit bg-gray-200 dark:bg-zinc-800/80 border border-gray-400 rounded p-4">

              <!-- Size -->
              <strong>Size</strong>
              <div id="size" class="flex gap-2">

                <!-- Small Option -->
                <div class="flex justify-center w-24">
                  <input 
                    type="radio" 
                    id="small" 
                    name="size" 
                    value="small" 
                    class="peer absolute opacity-0 w-0 h-0"
                  >
                  <label 
                    for="small" 
                    class="w-full px-4 py-2 bg-red-600 hover:bg-red-600/90 cursor-pointer border rounded-full text-white peer-checked:ring-2 peer-checked:ring-blue-500 peer-checked:ring-offset-2"
                    tabindex="0"
                  >
                    <span class="inline-block align-middle text-center w-full">Small</span>
                  </label>
                </div>

                <!-- Medium Option -->
                <div class="flex justify-center w-24">
                  <input 
                    type="radio" 
                    id="medium" 
                    name="size" 
                    value="medium" 
                    class="peer absolute opacity-0 w-0 h-0"
                    checked
                  >
                  <label 
                    for="medium" 
                    class="w-full px-4 py-2 bg-yellow-600 hover:bg-yellow-600/90 cursor-pointer border rounded-full text-white peer-checked:ring-2 peer-checked:ring-blue-500 peer-checked:ring-offset-2"
                    tabindex="0"
                  >
                    <span class="inline-block align-middle text-center w-full">Medium</span>
                  </label>
                </div>

                <!-- Large Option -->
                <div class="flex justify-center w-24">
                  <input 
                    type="radio" 
                    id="large" 
                    name="size" 
                    value="large" 
                    class="peer absolute opacity-0 w-0 h-0"
                  >
                  <label 
                    for="large" 
                    class="w-full px-4 py-2 bg-green-600 hover:bg-green-600/90 cursor-pointer border rounded-full text-white peer-checked:ring-2 peer-checked:ring-blue-500 peer-checked:ring-offset-2"
                    tabindex="0"
                  >
                    <span class="inline-block align-middle text-center w-full">Large</span>
                  </label>
                </div>

                <!-- Twitch Option -->
                <div class="relative">
                  <input 
                    type="radio" 
                    id="twitch"
                    name="size" 
                    value="twitch" 
                    class="peer absolute opacity-0 w-0 h-0"
                  >
                  <label 
                    for="twitch" 
                    class="w-24 h-12 bg-twitch hover:bg-twitch/90 inline-flex items-center justify-center cursor-pointer rounded-full border-2 border-transparent peer-checked:ring-2 peer-checked:ring-blue-500 peer-checked:ring-offset-2"
                    tabindex="0"
                  >
                    <img src="../assets/twitch.png" alt="Twitch" class="w-8 h-auto" />
                  </label>
                </div>

                <!-- Discord Option -->
                <div class="relative">
                  <input 
                    type="radio" 
                    id="discord" 
                    name="size" 
                    value="discord" 
                    class="peer absolute opacity-0 w-0 h-0"
                  >
                  <label 
                    for="discord" 
                    class="w-24 h-12 bg-discord hover:bg-discord/90 inline-flex items-center justify-center cursor-pointer rounded-full border-2 border-transparent peer-checked:ring-2 peer-checked:ring-blue-500 peer-checked:ring-offset-2"
                    tabindex="0"
                  >
                    <img src="../assets/discord.png" alt="Discord" class="w-8 h-auto" />
                  </label>
                </div>

                <!-- Custom Option -->
                <div class="flex justify-center w-24">
                  <input 
                    type="radio" 
                    id="custom" 
                    name="size" 
                    value="custom" 
                    class="peer absolute opacity-0 w-0 h-0"
                  >
                  <label 
                    for="custom"
                    class="w-full px-4 py-2 bg-gray-400 hover:bg-gray-400/90 cursor-pointer border rounded-full text-white peer-checked:ring-2 peer-checked:ring-blue-500 peer-checked:ring-offset-2"
                    tabindex="0"
                  >
                    <span class="inline-block align-middle text-center w-full">Custom</span>
                  </label>
                </div>

              </div>

              <!-- Width & Height (only shown if user selects "custom" radio) -->
              <div id="custom-size" class="flex flex-col">
                <div class="flex gap-2">
                  <div class="flex gap-1 items-center">
                    <label for="width">Width</label>
                    <input
                      type="number"
                      id="width"
                      name="width"
                      min="1"
                      max="500"
                      step="1"
                      class="bg-gray-100 outline-none border rounded p-1"
                      readonly
                    />
                  </div>
                  <div class="flex gap-1 items-center">
                    <label for="height">Height</label>
                    <input
                      type="number"
                      id="height"
                      name="height"
                      min="1"
                      max="500"
                      step="1"
                      class="bg-gray-100 outline-none border rounded p-1"
                      readonly
                    />
                  </div>
                  <div class="flex gap-1 items-center">
                    <label for="aspect-ratio">Maintain Aspect Ratio</label>
                    <input 
                      type="checkbox"
                      id="aspect-ratio"
                      disabled
                      checked
                    />
                  </div>
                </div>
                <div id="size-warning" class="sr-only text-yellow-500 flex items-center gap-1">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 2c5.523 0 10 4.477 10 10a10 10 0 0 1 -19.995 .324l-.005 -.324l.004 -.28c.148 -5.393 4.566 -9.72 9.996 -9.72zm.01 13l-.127 .007a1 1 0 0 0 0 1.986l.117 .007l.127 -.007a1 1 0 0 0 0 -1.986l-.117 -.007zm-.01 -8a1 1 0 0 0 -.993 .883l-.007 .117v4l.007 .117a1 1 0 0 0 1.986 0l.007 -.117v-4l-.007 -.117a1 1 0 0 0 -.993 -.883z"/>
                  </svg>
                  <div id="size-warning-text"></div>
                </div>
              </div>

              <!-- Exposure -->
              <div class="flex flex-col gap-1">
                <label for="exposure" class="w-fit">
                  <strong>Exposure</strong>
                </label>
                <div class="flex flex-row gap-2">
                  <input
                    type="range"
                    id="exposure"
                    name="exposure"
                    min="0"
                    max="100"
                  />
                  <input
                    type="number"
                    id="exposure-value"
                    min="0"
                    max="100"
                    step="1"
                    value="50"
                    title="Exposure"
                    class="outline-none border dark:border-2 dark:border-gray-800 rounded p-1 dark:bg-neutral-900"
                  />
                </div>
              </div>

              <!-- Style -->
              <div class="flex flex-col gap-1">
                <label for="style" class="w-fit">
                  <strong>Style</strong>
                </label>
                <div class="flex flex-row gap-2">
                  <select
                    id="style"
                    name="style"
                    class="py-1 pr-1 dark:bg-neutral-900"
                  >
                    <option value="normal" selected>Normal</option>
                    <option value="contrast">High Contrast</option>
                    <option value="edge">Edge Contrast</option>
                    <option value="brightness">Brightness</option>
                  </select>
                </div>
              </div>

              <!-- Invert -->
              <div class="flex flex-col gap-1">
                <label for="invert" class="w-fit">
                  <strong>Invert</strong>
                </label>
                <div class="relative">
                  <input
                    type="checkbox"
                    id="invert"
                    name="invert"
                    class="relative peer shrink-0 appearance-none w-5 h-5 bg-white dark:bg-neutral-900 checked:bg-black dark:checked:bg-white rounded cursor-pointer"
                  />
                  <svg class="absolute inset-0 w-5 h-5 hidden stroke-white dark:stroke-black peer-checked:block pointer-events-none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="20 6 9 17 4 12"></polyline>
                  </svg>
                </div>
              </div>

              <button
                id="submit"
                class="bg-blue-500 hover:bg-blue-500/90 text-white py-2 border rounded-lg flex items-center justify-center min-h-[42px]"
                type="submit"
              >
                <span id="submit-btn-text">Convert to ASCII</span>
                <svg id="submit-btn-spinner" class="size-5 animate-spin fill-white sr-only" viewBox="0 0 24 24">
                  <path d="M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z" opacity=".25"/>
                  <path d="M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z"/>
                </svg>
              </button>
            </div>

          </div>
        </div>

        <!-- Error message -->
        <div id="error" class="sr-only text-red-500 text-center"></div>

      </form>

      <!-- Output -->
      <div id="output-wrapper" class="relative sr-only">
        <table id="output" class="relative table border rounded p-2 font-mono whitespace-pre-wrap w-fit max-w-screen-2xl overflow-x-auto border-collapse text-[0.5rem] cursor-pointer"></table>
        <div id="output-copy-success" class="absolute inset-0 backdrop-blur-sm sr-only flex items-center justify-center cursor-pointer pointer-events-none">
          <span class="p-2 bg-gray-200/80 rounded cursor-pointer">
            Copied to Clipboard!
          </span>
        </div>
        <div id="output-copy-failure" class="absolute inset-0 bg-red-100/50 backdrop-blur-sm sr-only flex items-center justify-center cursor-pointer pointer-events-none">
          <span class="p-2 bg-gray-400/80 rounded cursor-pointer">
            Error Copying Output
          </span>
        </div>
      </div>
    </div>
  </body>
</html>